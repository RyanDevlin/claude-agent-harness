services:
  agent:
    build: .
    env_file:
      - config.env
    environment:
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
    volumes:
      # Mount only the specific SSH deploy key for git push access
      - ${SSH_KEY_PATH}:/run/ssh_key:ro

# Usage:
#   docker compose build
#   docker compose up                  # Run 1 agent
#   docker compose up --scale agent=4  # Run 4 agents in parallel
