services:
  agent:
    build: .
    env_file:
      - config.env
    environment:
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - SSH_AUTH_SOCK=/ssh-agent
    volumes:
      # Mount SSH agent for git push access (if using SSH URLs)
      - ${SSH_AUTH_SOCK:-/dev/null}:/ssh-agent
      - ${HOME:-.}/.ssh:/root/.ssh:ro

# Usage:
#   docker compose build
#   docker compose up                  # Run 1 agent
#   docker compose up --scale agent=4  # Run 4 agents in parallel
